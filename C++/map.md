# Using map in C++  

C++ 를 사용하면서 여러 수 또는 규칙이 있는 수열 등을 다루다 보면,  
두 개의 수를 짝을 지어서 관리해야하는 필요성이 발생한다.  

이 문서에서는 `map` 컨테이너의 개략적인 내부구조와 그 사용법을 알아본다.  

### How does it works?
`map` 의 자료 구성은 크게 2가지로 이루어져 있다.  
인덱스의 역할을 하는 `<key>` 와 값을 의미하는 `<value>` 로 이루어져 있다.  

개별 원소를 구분할 수 있는 `<key>` 의 존재덕분에 `map` 컨테이너는   
자료를 트리로 구성하여 관리한다.  
트리는 여러개의 형태를 가질 수 있지만 `map` 이 사용하는 구조는 레드-블랙 트리이다.  
트리 내부에서의 정렬은 `<key>` 값을 기준으로 이루어진다.  

효율적인 정렬을 위한 레드-블랙 트리를 사용한다는 것은 `map` 컨테이너가   
스스로 내부의 데이터를 정렬해 관리한다는 뜻이다.  
따라서 정렬이 필요하거나 특정 값을 검색만 하는 경우 높은 퍼포먼스를 보여주지만  
**잦은 데이터의 삽입 또는 제거에는 적합하지 않다.**  

### How to use it?
먼저 `map` 을 사용하기 위해서는 라이브러리를 추가해주어야 한다.  
그 뒤 `map` 형의 변수를 선언하고 구성 요소의 형식을 정해준다.  

``` C++
#include <map>

map<int, string> mp;
```

위 코드에서 `map<int, string> mp` 이 의미하는 바는  
`<key>` 값으로 `int` 형의 데이터를 가지며 `<value>` 값으로 `string` 형의 데이터를 가지는   `mp` 변수를 선언한다는 뜻이다.  

`vector, string` 과 같은 여타 컨테이너 변수처럼 `map` 도 비슷한 멤버함수를 가진다.  
하지만 탐색에 특화된 컨테이너답게 다양한 탐색함수를 제공한다.  
일부를 나열하자면,  

- `find(...)`  
이 함수는 인자로 주어진 `<key>` 값을 찾아준다.  
- `lower_bound(), upper_bound()`  
각각 인자와 일치하는 데이터와 그 다음 데이터를 찾아준다.  
- `count(...)`
인자로 주어진 `<key>` 를 가지는 원소의 수를 찾아준다.  

등이 있다.  

값을 삽입할 때에는 `insert()` 함수를 사용한다.  
다른 컨테이너와 달리 `push_back(), pop_back()` 등의 함수가 없는 이유는  
위에서 설명한것처럼 `map`의 자료구조가 자동정렬기능을 가지고 있기때문인 것으로 보인다.  
참고로 값을 제거할 때에는 `erase()` 함수를 사용한다.  
당연히 매번 삽입과 제거를 할 때마다 트리의 균형을 맞추기 위해 재정렬이 일어난다.  
*(이는 레드-블랙 트리의 정렬 특성이다)*
**데이터의 크기가 작다면 별 상관없겠지만 크기가 크다면 오버헤드 또한 커지므로 주의하자.**   

더 많은 멤버함수는 [이곳](http://www.cplusplus.com/reference/map/map/)에서 확인가능  